<!DOCTYPE html>
<html>
<head>
  
  <!-- <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">   -->
  <!-- <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> -->
<style>
  
body {
  font-family: Arial, sans-serif;
}

.panel {
  display: inline-block;
  border: 1px solid #ddd;
  padding: 20px;
  margin: 10px;
  text-align: center;
  min-width: 200px;
}

.value {
  font-size: 48px;
  font-weight: bold;
  margin: 10px 0;
}

.unit {
  font-size: 16px;
  font-weight: bold;
  margin: 0;
}

.icon {
  font-size: 48px;
  margin-bottom: 10px;
}

.graph {
  height: 100px;
  background-color: #f7f7f7;
}

.explanation {
  font-size: 14px;
  margin-top: 10px;
}

.explanation strong {
  font-weight: bold;
}

.explanation span {
  font-weight: bold;
  color: #008000;
}

h1{
  text-align: center;
}

.info{
  /* text-align: center; */
}


</style>
  
<title>Smart Health Monitoring</title>
</head>
<body>
  





  <h1>Smart Health Monitoring</h1>

  <div class="info">
    <h2>Patient Information</h2>
    <p><strong>Name:</strong> John Smith</p>
    <p><strong>Disease:</strong> Diabetes</p>
    <p><strong>Number of devices:</strong> 3</p>
  </div>

	<div class="panel">
    <div class="icon">&#x1F321;</div>
    <div class="value" id="temperature"></div>
    <div class="unit">°C</div>
    <div class="graph"></div>
    <div class="explanation">
      <strong>Temperature</strong><br>
      Ideal range: <span>23°C - 29°C</span>
    </div>
  </div>
  <div class="panel">
    <div class="icon">&#x1F4A7;</div>
    <div class="value" id="humidity"></div>
    <div class="unit">%</div>
    <div class="graph"></div>
    <div class="explanation">
      <strong>Humidity</strong><br>
      Ideal range: <span>30% - 60%</span>
    </div>
  </div>
  <div class="panel">
    <div class="icon">&#x2764;</div>
    <div class="value" id="pulse-rate"></div>
    <div class="unit">bpm</div>
    <div class="graph"></div>
    <div class="explanation">
      <strong>Pulse Rate</strong><br>
      Ideal range: <span>60 bpm - 100 bpm</span>
    </div>
  </div>
  


  <i class="fas fa-heart"></i>

  


  
  
  <script>
  
  

const apiKey = 'RGQID3QZDTWSQ7NK';
const channelId = '2075342';

setInterval(() => {
  const xhr = new XMLHttpRequest();
  const url = `https://api.thingspeak.com/channels/${channelId}/fields/1,2,3?api_key=${apiKey}&results=1`;

  xhr.onreadystatechange = function() {
    if (this.readyState === 4 && this.status === 200) {
      const response = JSON.parse(this.responseText);
      const temperature = response.feeds[0].field1;
      const humidity = response.feeds[0].field2;
      const pulseRate = response.feeds[0].field3;
      // console.log(`The latest values are: ${value1}, ${value2}, ${value3}`);
       // Update the div element with the temperature value
  document.getElementById("temperature").innerHTML = temperature;

// Update the div element with the humidity value
document.getElementById("humidity").innerHTML = humidity;

// Update the div element with the pulse rate value
document.getElementById("pulse-rate").innerHTML = pulseRate;

// Update the sensor values with the normal range colors
updateSensorValues(temperature, humidity, pulseRate);
    }
  };

  xhr.open('GET', url, true);
  xhr.send();
}, 10000);


// Get references to the temperature, humidity, and pulse rate elements
const temperatureElement = document.getElementById('temperature');
const humidityElement = document.getElementById('humidity');
const pulseRateElement = document.getElementById('pulse-rate');

// Set the normal range values for temperature, humidity, and pulse rate
const normalRanges = {
  temperature: {
    low: 23,
    high: 29
  },
  humidity: {
    low: 30,
    high: 60
  },
  pulseRate: {
    low: 60,
    high: 100
  }
};

// Update the temperature, humidity, and pulse rate values
function updateSensorValues(temperature, humidity, pulseRate) {
  // Update the temperature value and color
  if (temperature < normalRanges.temperature.low || temperature > normalRanges.temperature.high) {
    temperatureElement.style.color = 'red';
  } else {
    temperatureElement.style.color = 'green';
  }

  // Update the humidity value and color
  if (humidity < normalRanges.humidity.low || humidity > normalRanges.humidity.high) {
    humidityElement.style.color = 'red';
  } else {
    humidityElement.style.color = 'green';
  }

  // Update the pulse rate value and color
  if (pulseRate < normalRanges.pulseRate.low || pulseRate > normalRanges.pulseRate.high) {
    pulseRateElement.style.color = 'red';
  } else {
    pulseRateElement.style.color = 'green';
  }
}
  
  
  
  
  
 
    </script>










  
  
